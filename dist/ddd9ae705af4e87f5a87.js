const themes={Погода:["дождь","снег","ветер","град","туман"],Города:["минск","москва","берлин","париж","киев"],Животные:["тигр","слон","кошка","собака","орел"],Фрукты:["яблоко","банан","груша","апельсин","виноград"],Спорт:["футбол","теннис","хоккей","бокс","шахматы"]};let word="",guessed=[],attempts=10,hintUsed=!1;function showScreen(e){document.querySelectorAll(".screen").forEach(e=>e.classList.remove("active")),document.getElementById(e).classList.add("active")}function startGame(){word=document.getElementById("wordInput").value.toLowerCase(),initGame()}function chooseTheme(e){word=themes[e][Math.floor(Math.random()*themes[e].length)],initGame()}function initGame(){guessed=Array(word.length).fill("_"),attempts=10,hintUsed=!1,document.getElementById("hintBtn").disabled=!1,updateWord(),updateAttempts(),drawHangman(),createAlphabet(),showScreen("game")}function updateWord(){document.getElementById("wordDisplay").textContent=guessed.join(" ")}function updateAttempts(){document.getElementById("attemptsDisplay").textContent="Осталось попыток: "+attempts}function createAlphabet(){const e=document.getElementById("alphabet");e.innerHTML="";for(let t of"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЫЭЮЯ"){let n=document.createElement("button");n.textContent=t,n.onclick=()=>checkLetter(t.toLowerCase(),n),e.appendChild(n)}}function checkLetter(e,t){if(t&&(t.disabled=!0),word.includes(e)){for(let t=0;t<word.length;t++)word[t]==e&&(guessed[t]=e);updateWord(),guessed.includes("_")||endGame(!0)}else attempts--,updateAttempts(),drawHangman(),0===attempts&&endGame(!1)}function drawHangman(){const e=document.getElementById("hangman").getContext("2d");e.clearRect(0,0,200,250),e.strokeStyle="#fff",e.fillStyle="#fff";let t=10-attempts;t>0&&e.fillRect(20,230,160,10),t>1&&e.fillRect(50,50,10,180),t>2&&e.fillRect(50,50,100,10),t>3&&e.fillRect(150,50,2,30),t>4&&(e.beginPath(),e.arc(150,90,20,0,2*Math.PI),e.stroke()),t>5&&e.fillRect(149,110,2,50),t>6&&(e.beginPath(),e.moveTo(150,120),e.lineTo(120,150),e.stroke()),t>7&&(e.beginPath(),e.moveTo(150,120),e.lineTo(180,150),e.stroke()),t>8&&(e.beginPath(),e.moveTo(150,160),e.lineTo(120,200),e.stroke()),t>9&&(e.beginPath(),e.moveTo(150,160),e.lineTo(180,200),e.stroke())}function hint(){if(hintUsed)return;let e=[];for(let t=0;t<guessed.length;t++)"_"===guessed[t]&&e.push(t);if(e.length){let t=e[Math.floor(Math.random()*e.length)],n=Array.from(document.querySelectorAll("#alphabet button")).find(e=>e.textContent.toLowerCase()===word[t]);checkLetter(word[t],n),hintUsed=!0,document.getElementById("hintBtn").disabled=!0}}function endGame(e){document.getElementById("resultText").textContent=e?"Победа!":"Поражение... Слово было: "+word,showScreen("result")}function newGame(){document.getElementById("wordInput").value="",showScreen("start")}document.addEventListener("keydown",e=>{if(!document.getElementById("game").classList.contains("active"))return;let t=e.key.toLowerCase();if(/[а-яё]/.test(t)){let e=Array.from(document.querySelectorAll("#alphabet button")).find(e=>e.textContent.toLowerCase()===t);e&&!e.disabled&&checkLetter(t,e)}});